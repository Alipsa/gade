# Gade v1.0.0 Release Roadmap

**Document Version:** 1.3
**Last Updated:** February 2, 2026
**Status:** Draft - Pre-Release Review
**Changes:**
- v1.1: Incorporated items from todo.md and maven-utils-issues.md
- v1.2: Removed issues #8 and #9 (already solved in Gade), consolidated to single Maven validation improvement
- v1.3: Added task #15 to upgrade to maven-utils 1.2.0 for cleaner API

---

## Executive Summary

Gade is a mature Groovy Analytics Development Environment with **181 Java classes** (~28K LOC) supporting multiple runtime environments (Gade, Gradle, Maven, Custom), comprehensive code completion, JDBC integration, and Git support. 
This document outlines the path to v1.0.0 release readiness.

**Overall Assessment:**
The codebase demonstrates solid architecture with excellent separation of concerns.
However, **9 critical issues** and **19 important improvements** should be addressed before the v1.0.0 release to ensure production quality.

**Note:** Maven runtime integration is already working well - Java home configuration and argument parsing are correctly implemented.

**Recommended Timeline:** 3-4 weeks to address critical and high-priority items.

---

## Table of Contents

1. [Current State](#current-state)
2. [Critical Issues (Must-Fix)](#critical-issues-must-fix)
3. [Important Improvements (Should-Fix)](#important-improvements-should-fix)
4. [Simplification Opportunities](#simplification-opportunities)
5. [Nice-to-Have Enhancements](#nice-to-have-enhancements)
6. [Testing & Quality Assurance](#testing--quality-assurance)
7. [Documentation Requirements](#documentation-requirements)
8. [Release Checklist](#release-checklist)

---

## Current State

### Architecture Strengths

✅ **Modular Design**
- Clean separation between UI (JavaFX), execution engines, and build integration
- Well-organized package structure by domain (code, console, runtime, utils, etc.)
- Effective use of interfaces (`CompletionEngine`, `GroovyEngine`, `TaskListener`)

✅ **Runtime System**
- Supports 4 runtime modes: GADE (in-process), Gradle, Maven, Custom
- Process isolation for Gradle/Maven runtimes prevents classpath conflicts
- JSON RPC protocol over TCP for subprocess communication

✅ **Code Completion**
- Pluggable completion engine architecture
- Supports Groovy, SQL, JavaScript
- Advanced type inference for Groovy (GroovyTypeResolver - 613 LOC)

✅ **Build Integration**
- Gradle Tooling API integration with intelligent caching
- Maven dependency resolution via external utilities
- Project Groovy version precedence over bundled version

✅ **Data Analysis**
- Integration with Matrix library for data frames
- Chart visualization (XChart, Hansolo)
- JDBC connection management with metadata introspection

### Technical Metrics

| Metric                 | Value                        | Assessment            |
|------------------------|------------------------------|-----------------------|
| **Total Java Classes** | 181                          | Well-organized        |
| **Total LOC**          | ~28,000                      | Manageable            |
| **Test Classes**       | 42                           | **Needs expansion**   |
| **Largest Class**      | 1,165 LOC (ConsoleComponent) | **Needs refactoring** |
| **System.out.println** | 156 instances (36 files)     | **Must remove**       |
| **TODO/FIXME**         | 40 instances (28 files)      | **Needs resolution**  |
| **Dependencies**       | ~30 external libraries       | Reasonable            |

### Known Limitations

⚠️ **GMD PDF Export**
- **BROKEN:** Produces 0-byte PDF files (#7 - CRITICAL)

⚠️ **Maven Runtime Integration**
- ✅ **SOLVED:** Java home per invocation works via `request.setJavaHome()`
- ✅ **SOLVED:** Maven flags correctly parsed (goals/properties/profiles separated)
- Maven home validation could be improved (#8 - LOW)

⚠️ **Script Interruption**
- Cannot interrupt Groovy GroovyShell evaluation (acknowledged in code)
- SQL query cancellation not fully implemented

⚠️ **Large File Support**
- Files >100MB may not highlight properly
- Syntax highlighting disabled for very large files

⚠️ **Dynamic Dependency Loading**
- @Grab annotation parsing incomplete
- JDBC driver versions hardcoded instead of auto-detected

⚠️ **Testing Coverage**
- SQL and JavaScript completion engines minimally tested
- Gradle and Maven integration barely tested

---

## Critical Issues (Must-Fix)

### 1. Remove Debug Output (Priority: CRITICAL)

**Issue:** 156 `System.out.println` / `System.err.println` calls in production code pollute console output.

**Affected Files (36 files, top offenders):**
- `GitStatusDialog.java` - 13 debug prints in constructor
- `RuntimeJsr223RequirementTest.java` - 14 prints (test file - acceptable)
- `JdbcTest.java` - 16 prints (test file - acceptable)
- `PseudoClassTree.java` - 13 prints (test file - acceptable)
- `GradleUtilsDaemonRecoveryTest.java` - 12 prints (test file - acceptable)

**Production Code to Fix:**
- `ConsoleComponent.java` (lines 532, 659)
- `GitStatusDialog.java` (lines 21-41)
- `DynamicContextMenu.java` (lines 601, 651, 763)
- `FileUtils.java` (lines 130, 344)
- `PublishDialog.java` (lines 94, 105)
- `BigQueryTask.java` (lines 28, 34, 38)
- `SqlThread.java` (lines 23, 31)

**Action:**
```java
// BEFORE:
System.out.println("Debug: something happened");

// AFTER:
log.debug("something happened");
```

**Estimated Effort:** 2-3 hours

---

### 2. Fix Resource Leak in ConnectionHandler (Priority: CRITICAL)

**Issue:** JDBC `Statement` and `ResultSet` not properly closed, causing resource leaks and potential connection pool exhaustion.

**Location:** `environment/connections/ConnectionHandler.java:145-147`

**The Problem:**

While the JDBC specification states that closing a `Connection` *should* close associated `Statement` and `ResultSet` objects, **this is NOT guaranteed** and creates several issues:

1. **Not all JDBC drivers properly cascade close operations** - Some drivers may leave Statements open even when the Connection is closed

2. **Connection pooling makes this critical** - When using a connection pool (common in applications):
   - `connection.close()` does NOT actually close the connection
   - It RETURNS the connection to the pool for reuse
   - The unclosed `Statement` remains attached to the pooled connection
   - Each call to this method leaks another Statement on the pooled connection
   - Eventually hits database limits (e.g., max statements per connection)
   - Results in `SQLException: Too many open statements` or connection pool exhaustion

3. **Database cursor leaks** - The `ResultSet` holds a database cursor that consumes server-side resources until explicitly closed

**Current Code:**
```java
Connection jdbcCon = connect();
// Creates Statement but loses reference - cannot close it later!
ResultSet rs = jdbcCon.createStatement().executeQuery("select * from sqlite_master");
if (rs.next()) hasTables = true;
jdbcCon.close();  // Returns connection to pool, Statement still attached and unclosed!
```

**Fixed Code:**
```java
Connection jdbcCon = connect();
// try-with-resources ensures both Statement and ResultSet are closed
// BEFORE connection is returned to pool
try (Statement stmt = jdbcCon.createStatement();
     ResultSet rs = stmt.executeQuery("select * from sqlite_master")) {
  if (rs.next()) hasTables = true;
}
jdbcCon.close();  // Now safe - Statement was properly closed first
```

**Why try-with-resources matters:**
- Guarantees resources are closed in reverse order: ResultSet → Statement → Connection
- Handles exceptions properly (if `rs.next()` throws, resources still close)
- Follows JDBC best practices and prevents resource leaks

**Estimated Effort:** 30 minutes

---

### 3. Fix Typo in Error Message (Priority: HIGH)

**Location:** `ConsoleComponent.java:613`

**Current:**
```java
msg = "Unknwn exception of type " + ex.getClass() + ": " + ex.getMessage();
```

**Fixed:**
```java
msg = "Unknown exception of type " + ex.getClass() + ": " + ex.getMessage();
```

**Estimated Effort:** 5 minutes

---

### 4. Replace Suppressed Exception Handlers (Priority: HIGH)

**Issue:** Silent exception handlers mask bugs and make debugging impossible.

**Affected Files:**
- `RuntimeProcessRunner.java` (lines 405, 464)
- `SqlSchemaIntrospector.java` (lines 35, 51)
- `GroovyTextArea.java` (lines 296, 537)
- `GadeRunnerMain.java` (line 236)

**Current Pattern:**
```java
catch (IOException ignored) {}  // BAD: Silent failure
```

**Fixed Pattern:**
```java
catch (IOException e) {
  log.debug("Optional operation failed, continuing", e);  // GOOD: Logged
}
```

**Estimated Effort:** 1 hour

---

### 5. Fix Null Safety Issues (Priority: HIGH)

**Issue 1:** Unsafe `Objects.requireNonNull` on potentially null value

**Location:** `FileTree.java:178`

**Current:**
```java
if (rootDir != null && rootDir.exists() && Objects.requireNonNull(rootDir.list(...)).length > 0)
```

**Problem:** `File.list()` can return `null` even when directory exists. `requireNonNull` will throw NPE.

**Fixed:**
```java
String[] files = rootDir.list(...);
if (rootDir != null && rootDir.exists() && files != null && files.length > 0)
```

**Issue 2:** Missing null check before usage

**Location:** `ConsoleComponent.java:345` (exact line TBD - verify during fix)

**Action:** Add defensive null checks before dereferencing.

**Estimated Effort:** 1 hour

---

### 6. Complete or Document TODO Items (Priority: HIGH)

**40 TODO/FIXME comments** across 28 files indicate incomplete features.

**Critical TODOs to Address:**

| Location                            | Issue                              | Recommendation                         |
|-------------------------------------|------------------------------------|----------------------------------------|
| `ConsoleComponent.java:366`         | Cannot interrupt script evaluation | Document as known limitation in README |
| `ConsoleComponent.java:653`         | Get dependencies from @Grab        | Implement or mark as v1.1 feature      |
| `ConsoleComponent.java:931`         | Missing config for result printing | Implement preference setting           |
| `SqlTab.java:164`                   | Cannot interrupt SQL queries       | Implement using `Statement.cancel()`   |
| `JdbcDriverDependencyUtils.java:16` | Hardcoded driver versions          | Load from properties file              |
| `TextAreaTab.java:160`              | Large files don't highlight        | Document as known limitation           |
| `StringUtils.java:19`               | User locale configuration          | Implement or defer to v1.1             |

**Action Plan:**
1. Complete 5 high-impact TODOs
2. Document 10 known limitations
3. Move 25 to v1.1 backlog (create `todo-v1.1.md`)

**Estimated Effort:** 8-10 hours

---

### 7. Fix GMD PDF Export (Priority: CRITICAL)

**Issue:** GMD "Export to PDF" feature produces 0-byte files, rendering the feature broken.

**Location:** `GmdUtil.java:66-125` (method `saveGmdAsPdf`)

**Current Code:**
```java
try (OutputStream os = new FileOutputStream(target)) {
  PdfRendererBuilder builder = new PdfRendererBuilder()
      .useSVGDrawer(new BatikSVGDrawer())
      .useMathMLDrawer(new MathMLDrawer())
      .withW3cDocument(doc3, new File(".").toURI().toString())
      .toStream(os);
  builder.run();
  // Reports fileSize but file is actually 0 bytes
}
```

**Potential Causes:**
1. `builder.run()` may not be flushing/writing to stream
2. Exception silently caught in `catch (Throwable t)` block
3. W3C document conversion producing empty content
4. Stream not being flushed before closing

**Action Plan:**
1. Add debug logging to track execution flow
2. Verify `doc3` is not empty before PDF generation
3. Ensure stream is explicitly flushed: `os.flush()`
4. Add better error handling instead of silent catch
5. Test with simple GMD content to isolate issue

**Test Case:**
```groovy
// Create test.gmd with:
# Test Document
This is a test.
// Export to PDF and verify file size > 0
```

**Estimated Effort:** 3-4 hours (investigation + fix)

---

### 8. Improve Maven Home Discovery Validation (Priority: LOW)

**Note:** Issues #8 and #9 from maven-utils-issues.md are **already solved** in Gade:
- ✅ Java home per invocation: `MavenBuildUtils.java:86` calls `request.setJavaHome()`
- ✅ Argument parsing: `MavenBuildUtils.java:174-187` correctly separates goals from flags

**Remaining Issue:** Maven home validation could be stronger.

**Location:** `MavenBuildUtils.java:139-150` (`configureMavenHome`)

**Current Behavior:**
- Calls `MavenUtils.locateMavenHome()` which may return invalid directories (e.g., `/usr`)
- Only checks if directory exists (line 145), not if it's a valid Maven home

**Enhancement:**
Add validation to ensure discovered directory is actually a Maven distribution:

```java
private static void configureMavenHome(Invoker invoker, ConsoleTextArea console) {
  String mavenHome = MavenUtils.locateMavenHome();
  if (mavenHome == null || mavenHome.isBlank()) {
    return;
  }
  File mavenHomeDir = new File(mavenHome);
  // Enhanced validation: check for Maven lib directory
  if (mavenHomeDir.exists() && new File(mavenHomeDir, "lib").exists()) {
    invoker.setMavenHome(mavenHomeDir);
    return;
  }
  console.appendWarningFx("Invalid Maven home (missing lib/): " + mavenHome);
}
```

**Estimated Effort:** 30 minutes

---

### 9. Validate All File Path Operations (Priority: MEDIUM)

**Issue:** Several file operations don't validate null returns or check existence properly.

**Affected Patterns:**
- `File.listFiles()` can return null
- `File.list()` can return null
- Path operations without existence checks

**Action:** Audit all file I/O code for null safety.

**Estimated Effort:** 3-4 hours

---

## Important Improvements (Should-Fix)

### 10. Refactor Large Classes (Priority: HIGH)

**Issue:** Three classes exceed 1,000 LOC, violating single responsibility principle.

| Class | LOC | Responsibilities | Proposed Split |
|-------|-----|------------------|----------------|
| **ConsoleComponent.java** | 1,165 | Runtime selection<br>Engine initialization<br>Script execution<br>Environment updates<br>Thread management | Split into:<br>- `GroovyEngineManager`<br>- `ScriptExecutor`<br>- `EnvironmentManager` |
| **MainMenu.java** | 1,136 | Menu creation<br>File operations<br>Dialogs<br>Project templates | Split into:<br>- `MenuBuilder`<br>- `FileOperations`<br>- `ProjectTemplates` |
| **GradleUtils.java** | 1,104 | Dependency resolution<br>Caching<br>Version management<br>Daemon recovery | Split into:<br>- `GradleDependencyResolver`<br>- `GradleCacheManager`<br>- `GradleDaemonRecovery` |

**Benefits:**
- Easier testing and maintenance
- Clearer responsibilities
- Better code reusability
- Reduced cognitive load

**Estimated Effort:** 16-20 hours (4-5 hours per class)

---

### 11. Consolidate Cache Implementation (Priority: MEDIUM)

**Issue:** Gradle and Maven have duplicate caching logic.

**Duplication:**
- `GradleUtils.java` (lines 60-62): Cache constants
- `MavenClasspathUtils.java` (lines 32-36): **Exact same pattern**

**Proposed Solution:**

Create `se.alipsa.gade.utils.ClasspathCacheManager`:

```java
public class ClasspathCacheManager {
  private static final String SCHEMA_VERSION = "1";
  private static final String CACHE_DIR = ".gade/cache";

  public ClasspathModel loadFromCache(String fingerprint, boolean testContext);
  public void saveToCache(String fingerprint, ClasspathModel model);
  private String computeFingerprint(File projectDir, List<Path> trackedFiles);
}
```

**Affected Files:**
- `GradleUtils.java`
- `MavenClasspathUtils.java`

**Benefits:**
- Single source of truth for caching logic
- Easier to maintain and test
- Consistent fingerprinting algorithm

**Estimated Effort:** 4-5 hours

---

### 12. Extract Common Tab Behavior (Priority: MEDIUM)

**Issue:** 10+ Tab classes (GroovyTab, SqlTab, JsTab, etc.) share 60-70% boilerplate code.

**Common Patterns:**
- Constructor with button setup
- `getTextContent()` / `setFile()` delegation
- Run/Execute button handler
- Status indicator management

**Proposed Solution:**

Create `AbstractExecutableTab` base class:

```java
public abstract class AbstractExecutableTab extends TextAreaTab {
  protected Button runButton;
  protected StatusIndicator statusIndicator;

  protected abstract void executeScript(String code);
  protected abstract String getExecutionTitle();

  // Common implementation of button setup, status updates
}
```

**Benefits:**
- Reduced duplication (save ~150-200 LOC per tab)
- Consistent UX across all executable tabs
- Easier to add new tab types

**Estimated Effort:** 6-8 hours

---

### 13. Version the Subprocess JSON Protocol (Priority: MEDIUM)

**Issue:** `RuntimeProcessRunner` ↔ `GadeRunnerMain` JSON RPC protocol has no version negotiation.

**Current Protocol:**
```json
{"type":"hello","port":12345}
{"cmd":"eval","id":"uuid","script":"code","bindings":{}}
{"type":"result","id":"uuid","result":"value"}
```

**Risks:**
- Future changes could break compatibility
- No way to detect version mismatches
- Can't gracefully upgrade protocol

**Proposed Solution:**

Add version handshake:

```json
// Runner → Gade
{"type":"hello","port":12345,"protocolVersion":"1.0"}

// Gade checks version compatibility, sends:
{"cmd":"handshake","version":"1.0","features":["interrupt","bindings"]}

// Runner confirms:
{"type":"handshake_ack","version":"1.0"}
```

**Files to Update:**
- `RuntimeProcessRunner.java` - Add version check
- `GadeRunnerMain.java` - Add version announcement
- Create `ProtocolVersion.java` constant class

**Estimated Effort:** 3-4 hours

---

### 14. Improve Thread Safety Documentation (Priority: LOW)

**Issue:** While thread safety appears sound, it's not explicitly documented.

**Good Current Practices:**
- `CompletionRegistry` - Double-checked locking with volatile
- `RuntimeProcessRunner` - Synchronized methods with locks
- `GradleUtils` - Volatile cache fields

**Action:** Add Javadoc annotations:

```java
/**
 * Thread-safe singleton. Uses double-checked locking with volatile field.
 * @threadsafe
 */
public class CompletionRegistry { ... }
```

**Estimated Effort:** 2-3 hours

---

## Simplification Opportunities

### 15. Switch to maven-utils 1.2.0 (Priority: MEDIUM)

**Issue:** Gade currently works around maven-utils limitations by using Maven Invoker API directly.

**Current Workaround:** `MavenBuildUtils.java` manually creates `InvocationRequest` and `Invoker` objects to handle Java home configuration and argument parsing.

**Enhancement:** maven-utils 1.2.0 will include a new convenience method:
```java
public static int runMaven(File pomFile, String[] mvnArgs, File javaHome,
                           Consumer<String> outConsumer, Consumer<String> errConsumer)
```

**Action Plan:**
1. Update `build.gradle` dependency: `se.alipsa:maven-utils:1.2.0`
2. Refactor `MavenBuildUtils.buildProject()` to use the new convenience method
3. Remove manual `InvocationRequest`/`Invoker` setup code
4. Test Maven runtime with custom Java home to ensure functionality preserved

**Before (current workaround):**
```java
InvocationRequest request = new DefaultInvocationRequest()
    .setBatchMode(true)
    .setPomFile(pom)
    .setBaseDirectory(projectDir)
    .addArgs(parsed.goals);
if (javaHomeOverride != null && !javaHomeOverride.isBlank()) {
  request.setJavaHome(new File(javaHomeOverride));
}
Invoker invoker = new DefaultInvoker();
configureMavenHome(invoker, console);
invoker.execute(request);
```

**After (using maven-utils 1.2.0):**
```java
File javaHome = javaHomeOverride != null && !javaHomeOverride.isBlank()
    ? new File(javaHomeOverride)
    : null;
MavenUtils.runMaven(pom, mvnArgs, javaHome,
    console::appendFx,
    console::appendWarningFx);
```

**Benefits:**
- Simpler code (fewer lines)
- Consistent with maven-utils API patterns
- Easier to maintain
- Less direct dependency on Maven Invoker API

**Estimated Effort:** 2-3 hours

---

### 17. Remove Deprecated Methods (Priority: LOW)

**Location:** `InOut.java:513,529`

```java
@Deprecated
public void view(String html, String... title) {
  viewHtml(html, title);
}
```

**Action:**
1. Search codebase for calls to deprecated `view()` methods
2. Replace with `viewHtml()`
3. Remove deprecated methods

**Estimated Effort:** 1-2 hours

---

### 18. Simplify Error Message Construction (Priority: LOW)

**Location:** `ConsoleComponent.java:601-618`

**Current:** Complex conditional logic with some redundant checks.

**Action:** Refactor into cleaner switch expression or method extraction.

**Estimated Effort:** 1 hour

---

### 19. Consider Java 21 Virtual Threads (Priority: LOW)

**Opportunity:** Replace `ScriptThread` with virtual threads for script execution.

**Benefits:**
- Reduced memory footprint (virtual threads are much lighter)
- Better scalability for concurrent script execution
- Simpler code (no manual thread pool management)

**Example:**
```java
// BEFORE:
Thread scriptThread = new Thread(task);
scriptThread.setDaemon(false);
scriptThread.start();

// AFTER (Java 21):
Thread.startVirtualThread(task);
```

**Consideration:** Requires Java 21 minimum version (currently targeting 21+).

**Estimated Effort:** 3-4 hours

---

## Nice-to-Have Enhancements

### 20. Enhanced JDBC Driver Auto-Detection (Priority: LOW)

**Current:** `JdbcDriverDependencyUtils.java` has hardcoded driver versions.

**Enhancement:** Query Maven Central API for latest driver versions dynamically.

**Estimated Effort:** 4-5 hours

---

### 21. Script Interruption Support (Priority: MEDIUM)

**Current Limitation:** Cannot interrupt running Groovy scripts (acknowledged TODO).

**Possible Solutions:**
1. Use `ThreadInterrupt` AST transformation (already used in `RuntimeClassLoaderFactory`)
2. Implement timeout wrapper with forced thread interruption
3. Document as limitation if no reliable solution exists

**Research Required:** Investigate Groovy's interruption capabilities.

**Estimated Effort:** 6-8 hours (if feasible)

---

### 22. Large File Handling (Priority: LOW)

**Current Limitation:** Files >100MB disable syntax highlighting.

**Enhancement Options:**
1. Lazy loading with virtual text area
2. Streaming editor for very large files
3. Better threshold detection (disable at 50MB instead of 100MB)

**Estimated Effort:** 8-10 hours

---

### 23. Password/Credential Management (Priority: MEDIUM)

**Current:** Passwords stored in preferences with basic encryption.

**Enhancement:** Integrate with system keyring (macOS Keychain, Windows Credential Store, Linux Secret Service).

**Libraries:** `com.github.javakeyring:java-keyring`

**Estimated Effort:** 6-8 hours

---

### 24. Project FileTree Improvements (Priority: LOW)

**Enhancement 1: Drag and Drop File Movement**
- Allow users to drag files in the file tree to move them to different directories
- Provide visual feedback during drag operation
- Confirm before moving files

**Enhancement 2: Auto-Refresh FileTree**
- Update the file tree automatically when adding a file
- Update when saving a file within the tree scope
- Eliminate need for manual refresh

**Current Behavior:** File tree is static and requires manual refresh to see new files.

**Implementation:**
1. Add drag-and-drop support to `FileTree.java`
2. Implement `FileSystemWatcher` to monitor project directory
3. Auto-refresh tree on file changes

**Estimated Effort:** 6-8 hours

---

## Testing & Quality Assurance

### 25. Expand Test Coverage (Priority: HIGH)

**Current State:**
- 42 test classes
- Coverage unknown (no JaCoCo report configured)

**Critical Areas Needing Tests:**

| Component | Current Tests | Needed Tests |
|-----------|--------------|--------------|
| **RuntimeProcessRunner** | 0 | Lifecycle, JSON protocol, error handling |
| **ConsoleComponent** | 1 | Runtime switching, script execution, interruption |
| **GroovyTypeResolver** | 0 | Type inference accuracy |
| **ConnectionHandler** | 0 | Connection pooling, metadata caching |
| **CompletionEngine** | 2 (partial) | **SQL and JavaScript completion need extensive testing** |
| **GradleUtils** | 5 | Daemon recovery, caching, version fallback |
| **Gradle/Maven Integration** | Limited | **Barely tested - likely has bugs** |
| **GMD PDF Export** | 0 | **Create test for PDF generation** |

**Action Plan:**
1. Add JaCoCo to build.gradle for coverage reporting
2. Write integration tests for `RuntimeProcessRunner` lifecycle
3. **Add comprehensive tests for SQL and JavaScript completion engines** (currently minimal)
4. **Test Gradle and Maven integration thoroughly** (currently barely tested - likely has bugs)
5. **Add test for GMD PDF export** (currently 0 tests for broken feature)
6. Create test suite for connection handling

**Estimated Effort:** 20-24 hours (increased due to additional testing needs)

**Target Coverage:** 70% for core components

---

### 26. Create Smoke Test Suite with TestFX (Priority: HIGH)

**Purpose:** Quick verification that core functionality works after build.

**Issue:** GUI tests are currently quite limited. Need to add TestFX framework for comprehensive JavaFX testing.

**Recommendation:** Use [TestFX](https://github.com/TestFX/TestFX) - a promising JavaFX GUI testing framework.

**Smoke Tests:**
1. Launch application (no exceptions)
2. Open sample Groovy script
3. Execute script in Gade runtime (verify output)
4. Switch to Gradle runtime (verify no errors)
5. Switch to Maven runtime (verify no errors)
6. Create new project from template
7. Execute SQL query against H2 database
8. Generate chart from data frame
9. **Test GMD PDF export** (verify file size > 0)
10. Save/load session

**Implementation:**
1. Add TestFX dependency to build.gradle
2. Create `SmokeTestSuite.java` using TestFX
3. Set up CI/CD to run GUI tests in headless mode

**Estimated Effort:** 8-10 hours (increased for TestFX setup)

---

### 27. Performance Testing (Priority: MEDIUM)

**Areas to Test:**
1. Completion engine response time (<100ms for suggestions)
2. Large file opening (10MB+ files)
3. Gradle dependency resolution with cache hit/miss
4. JDBC metadata introspection for large schemas (1000+ tables)
5. Script execution for long-running operations (memory usage)

**Tools:** JMH (Java Microbenchmark Harness)

**Estimated Effort:** 10-12 hours

---

## Documentation Requirements

### 28. User Documentation (Priority: CRITICAL)

**Missing Documentation:**

1. **README.md** - Needs expansion:
   - Feature overview with screenshots
   - Installation instructions (platform-specific)
   - Quick start guide
   - System requirements
   - Troubleshooting section

2. **User Guide** (create `docs/user-guide.md`):
   - Runtime selection guide (when to use Gade vs Gradle vs Maven)
   - Code completion usage
   - JDBC connection configuration
   - Git integration guide
   - Chart/visualization examples
   - Keyboard shortcuts reference

3. **API Documentation** - Generate Javadoc:
   ```bash
   ./gradlew javadoc
   ```
   - Ensure all public APIs have Javadoc
   - Include examples for extension points (`CompletionEngine`, `GroovyEngine`)

**Estimated Effort:** 16-20 hours

---

### 29. Developer Documentation (Priority: HIGH)

**Create:**

1. **ARCHITECTURE.md** - System overview:
   - Component diagram
   - Runtime execution models
   - JSON RPC protocol specification
   - Extension points for plugins

2. **CONTRIBUTING.md** - Developer guide:
   - Build instructions
   - Code style guidelines (already in AGENTS.md)
   - Pull request process
   - Testing requirements

3. **Architecture Decision Records (ADRs)**:
   - `docs/adr/001-separate-process-runtimes.md` - Why Gradle/Maven use subprocesses
   - `docs/adr/002-groovyshell-vs-jsr223.md` - Why we eliminated groovy-jsr223
   - `docs/adr/003-completion-engine-architecture.md` - Pluggable completion design

**Estimated Effort:** 12-16 hours

---

### 30. Release Notes (Priority: CRITICAL)

**Create `RELEASE-NOTES-1.0.0.md`:**

Structure:
```markdown
# Gade 1.0.0 Release Notes

## Overview
First stable release of Gade...

## New Features
- Multiple runtime support (Gade, Gradle, Maven, Custom)
- Intelligent code completion...

## Known Limitations
- Cannot interrupt long-running scripts
- Large files (>100MB) have limited syntax highlighting...

## System Requirements
- Java 21 or higher
- Operating Systems: macOS, Linux, Windows...

## Upgrade Notes
(None for initial release)

## Bug Fixes
(List major fixes from pre-release)

## Breaking Changes
(None for v1.0.0)
```

**Estimated Effort:** 2-3 hours

---

## Release Checklist

### Pre-Release Tasks

**Code Quality:**
- [ ] Fix all CRITICAL issues (#1-9)
- [ ] **Fix GMD PDF export** (produces 0-byte files) - #7
- [ ] **Improve Maven home validation** (check for lib/ directory) - #8
- [ ] Address HIGH priority improvements (#10-14)
- [ ] Remove all `System.out.println` from production code
- [ ] Fix resource leak in `ConnectionHandler`
- [ ] Fix typo "Unknwn" → "Unknown"
- [ ] Add logging to suppressed exception handlers
- [ ] Validate all null pointer risks
- [ ] Complete or document all TODO items

**Refactoring:**
- [ ] Refactor `ConsoleComponent.java` (split into 3 classes) - #10
- [ ] Refactor `MainMenu.java` (split into 3 classes) - #10
- [ ] Refactor `GradleUtils.java` (split into 3 classes) - #10
- [ ] Consolidate cache implementation - #11
- [ ] Extract common tab behavior - #12
- [ ] Version the JSON RPC protocol - #13
- [ ] **Upgrade to maven-utils 1.2.0** (simplify Maven runtime code) - #15

**Testing:**
- [ ] Add JaCoCo coverage reporting - #25
- [ ] Write RuntimeProcessRunner tests - #25
- [ ] **Test SQL and JavaScript completion engines thoroughly** - #25
- [ ] **Test Gradle and Maven integration** (currently barely tested) - #25
- [ ] **Add test for GMD PDF export** - #25
- [ ] **Test maven-utils 1.2.0 integration** - #15
- [ ] **Add TestFX framework for GUI testing** - #26
- [ ] Create comprehensive smoke test suite with TestFX - #26
- [ ] Achieve 70% coverage for core components - #25
- [ ] Run performance tests (identify bottlenecks) - #27
- [ ] Test on all supported platforms (macOS, Linux, Windows)

**Documentation:**
- [ ] Expand README.md with screenshots - #28
- [ ] Create user-guide.md - #28
- [ ] Generate Javadoc for all public APIs - #28
- [ ] Create ARCHITECTURE.md - #29
- [ ] Create CONTRIBUTING.md - #29
- [ ] Write 3 ADR documents - #29
- [ ] Create RELEASE-NOTES-1.0.0.md - #30

**Build & Packaging:**
- [ ] **Update maven-utils dependency to 1.2.0** in build.gradle - #15
- [ ] Update version to 1.0.0 in build.gradle
- [ ] Update version.properties
- [ ] Test `runtimeZip` task (create distribution)
- [ ] Verify all platforms (Linux, macOS, Windows)
- [ ] Test installation process
- [ ] Verify launcher scripts work correctly

**Legal & Licensing:**
- [ ] Ensure LICENSE file is present (MIT confirmed)
- [ ] Add NOTICE file for third-party dependencies
- [ ] Verify all dependencies are compatible with MIT license
- [ ] Add license headers to all source files (if policy requires)

**Final Verification:**
- [ ] Run full test suite: `./gradlew test -g ./.gradle-user`
- [ ] Run smoke tests on fresh installation
- [ ] Verify no warnings in build output
- [ ] Check for security vulnerabilities: `./gradlew dependencyCheckAnalyze`
- [ ] Performance benchmark comparison with v0.9.x (if applicable)

---

## Effort Summary

| Category | Task Count | Estimated Hours | Priority |
|----------|------------|-----------------|----------|
| **Critical Issues** | 9 | 20-30 hours | CRITICAL |
| **Important Improvements** | 5 | 31-40 hours | HIGH |
| **Simplifications** | 4 | 7-10 hours | LOW-MEDIUM |
| **Enhancements** | 5 | 30-39 hours | LOW-MEDIUM |
| **Testing** | 3 | 38-46 hours | HIGH |
| **Documentation** | 3 | 30-39 hours | CRITICAL |
| **TOTAL** | **29 tasks** | **156-204 hours** | |

**Recommended Focus for v1.0.0:**
- **Must Complete:** Critical Issues + Testing + Documentation = **88-115 hours**
- **Should Complete:** Important Improvements + maven-utils upgrade (#15) = **33-43 hours**
- **Total for v1.0.0:** **121-158 hours** (~3-4 weeks of dedicated work)

**Defer to v1.1:**
- Nice-to-have enhancements (#20-24: JDBC auto-detection, script interruption, large files, credentials, filetree)
- Database access through SSH tunnels
- Performance optimizations
- Advanced features (virtual threads, keyring integration)

---

## Risk Assessment

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| **Refactoring breaks existing functionality** | Medium | High | Comprehensive testing before/after refactor |
| **JSON protocol changes cause runtime failures** | Low | High | Thorough version negotiation testing |
| **Test coverage reveals critical bugs** | Medium | Medium | Fix before release, extend timeline if needed |
| **Performance issues with large projects** | Low | Medium | Performance testing and optimization |
| **Platform-specific installation issues** | Medium | Medium | Test on all platforms before release |
| **Third-party dependency conflicts** | Low | Medium | Lock dependency versions, test thoroughly |

---

## Post-Release Plan (v1.1 Roadmap)

**Future Enhancements:**
1. **Database access through SSH tunnels** - Connect to remote databases via SSH tunneling
   - [Implementation references](https://stackoverflow.com/questions/1968293/connect-to-remote-mysql-database-through-ssh-using-java)
   - Libraries: JSch or Apache MINA SSHD
2. Script interruption support (if solution found)
3. Large file handling improvements
4. System keyring integration for credentials
5. Virtual threads for script execution (Java 21)
6. Plugin system for custom completion engines
7. Integrated debugger for Groovy scripts
8. Collaborative editing support
9. WebSocket-based remote runtime
10. Notebook-style execution (Jupyter-like)
11. AI-powered code suggestions

---

## Conclusion

Gade is architecturally sound and feature-rich, requiring focused effort on:
1. **Critical bug fixes** (GMD PDF export, Maven integration issues, resource leaks)
2. **Code cleanup** (debug output, TODOs, suppressed exceptions)
3. **Refactoring** (split large classes)
4. **Testing** (expand coverage to 70%, add TestFX for GUI testing)
5. **Documentation** (user guide, API docs, architecture)

With **3-4 weeks of dedicated effort**, Gade will be production-ready for the v1.0.0 release.

**Next Steps:**
1. Review and approve this roadmap
2. **Wait for maven-utils 1.2.0 release** (planned for today)
3. Create GitHub issues for each task
4. Prioritize tasks into 4 sprints:
   - **Sprint 1 (Week 1):** Critical bug fixes + maven-utils upgrade (#7-9, #15)
   - **Sprint 2 (Week 2):** Code cleanup (#1-6: debug output, TODOs, resource leaks)
   - **Sprint 3 (Week 3):** Refactoring + important improvements (#10-14)
   - **Sprint 4 (Weeks 3-4):** Testing + documentation (#25-30)
5. Begin implementation

---

**Document Status:** Ready for Review
**Prepared By:** Claude (AI Assistant)
**Review Date:** TBD
**Approval:** Pending
